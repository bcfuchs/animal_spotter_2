<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />

    <link rel="stylesheet" type="text/css" href="css/anspot.css" />
    <link href="css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <title>Animal Spotter</title>
    <script type="text/javascript" src="js/jquery-2.1.3.js"></script>
    <script type="text/javascript" src="js/lawnchair.js"></script>
    <script type="text/javascript" src="js/photo.js"></script>
    <script type="text/javascript" src="js/anspot.js"></script>    
    <style>
      .row.map-container {
      height: 60%;

      }
      .row.location {
      height: 20%;

      }
    </style>
  </head>
  <body>
    <div id="wrap" class=" black">
      <!--
	  <div id="splash-image"></div>
	  -->
      <div class="container title-container green">

	<div class="row instructions">
	  <h2 class="page-title">Animal Spotter: <span id="title-type">Location</span></h2>
	</div>
      </div>
      
      <div class="container main-container species-container blue">



	
	<div class="row location">
	  <div id="loc" class="col-xs-12 col-md-12 query-panel query-panel" >
	    
	  </div>
	</div>
		<div class="row map-container">
	  <div id="map" class="col-xs-12 col-md-12 query-panel" >
	    
	  </div>
	</div>
      </div>
      
      <div class="container footer-container green">
	<div class="row">
	  <div class="col-xs-12 col-md-12 green footer-panel">
	    <div class="next-container">
	      <h2><a href="observations.html">Continue <span id="continue">&rarr;</span></a></h2>
	    </div>
	    
	  </div>
	</div>
      </div>


      <script type="text/javascript" src="cordova.js"></script>
      <script type="text/javascript" src="js/index.js"></script>
      <script>
	$("#hidewrap").click(function(){ $("#hideme").show()});
      </script>
    </div>
  </body>
      <script src="https://maps.googleapis.com/maps/api/js"></script>
      <script src="js/gmaps.js"></script>
  <script>

! function() {

//storage_get('anspot','species-type',function(d){ make_title(d) });

var location = function(cb){

    var onSuccess = function(position) {

 cb('Latitude: '          + position.coords.latitude          + ', ' +
 'Longitude: '         + position.coords.longitude         + ', ' +
 'Altitude: '          + position.coords.altitude          + ', ' +
 'Accuracy: '          + position.coords.accuracy          + ', ' +
 'Altitude Accuracy: ' + position.coords.altitudeAccuracy  + ', ' +
 'Heading: '           + position.coords.heading           + ', ' +
 'Speed: '             + position.coords.speed             + ', ' +
 'Timestamp: '         + position.timestamp                + ', ',position);

}
 var onError = function(error) {
  cb('code: '    + error.code    + ', ' +
  'message: ' + error.message + ', ');
 }

  navigator.geolocation.getCurrentPosition(onSuccess, onError,{ maximumAge: 3000, timeout: 5000, enableHighAccuracy: true });

}



$(document).on('deviceready',function(){
   var addLoc = function(m,pos){
         var lon = pos.coords.longitude;
         var lat = pos.coords.latitude;
          var location = {lat:lat,lon:lon}
var map = new GMaps({
div: '#map',
lat: lat,
lng: lon,
zoom: 6,
                        });
console.log(m);
$("#loc").html(m)
storage_put('anspot',{key:'location',value:location},function(d){console.log(d)});


};



console.log("finding location");

location(addLoc);


});


}()
  </script>
</html>
